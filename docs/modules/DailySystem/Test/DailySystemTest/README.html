<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>DailySystem Unit Tests </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="DailySystem Unit Tests ">
      
      
      <link rel="icon" href="../../../../favicon.ico">
      <link rel="stylesheet" href="../../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../../public/main.css">
      <meta name="docfx:navrel" content="../../../../toc.html">
      <meta name="docfx:tocrel" content="../../../../toc.html">
      
      
      
      
      <meta name="docfx:docurl" content="https://github.com/EndlessShirafu/VaNilla/blob/develop/Documents/docfx/modules/DailySystem/Test/DailySystemTest/README.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../../index.html">
            <img id="logo" class="svg" src="../../../../logo.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="dailysystem-unit-tests">DailySystem Unit Tests</h1>

<p>VaNillaエンジンのDailySystemモジュールの単体テスト集です。</p>
<h2 id="テスト概要">テスト概要</h2>
<p>このテストプロジェクトは、DailySystemの各コンポーネントの動作を検証します：</p>
<h3 id="テスト対象クラス">テスト対象クラス</h3>
<ol>
<li><p><strong>NtpClient</strong> (<code>NtpClientTest.cs</code>)</p>
<ul>
<li>NTPサーバーからの時刻取得機能</li>
<li>ネットワークエラーハンドリング</li>
<li>複数回の時刻取得</li>
</ul>
</li>
<li><p><strong>DailyMission</strong> (<code>DailyMissionTest.cs</code>)</p>
<ul>
<li>ミッションの進捗管理</li>
<li>完了状態の判定</li>
<li>リセット機能</li>
</ul>
</li>
<li><p><strong>RegularlyMission</strong> (<code>RegularlyMissionTest.cs</code>)</p>
<ul>
<li>週次・月次ミッションの進捗管理</li>
<li>目標達成時の制限処理</li>
<li>リセット機能</li>
</ul>
</li>
<li><p><strong>LoginBonus</strong> (<code>LoginBonusTest.cs</code>)</p>
<ul>
<li>ログインボーナスの状態管理</li>
<li>報酬情報の保持</li>
<li>受け取り状態の管理</li>
</ul>
</li>
<li><p><strong>DailySystemConfig</strong> (<code>DailySystemConfigTest.cs</code>)</p>
<ul>
<li>設定値の取得</li>
<li>列挙型の定義確認</li>
<li>ファイルパスの妥当性</li>
</ul>
</li>
<li><p><strong>DailySystemSaveData</strong> (<code>DailySystemSaveDataTest.cs</code>)</p>
<ul>
<li>セーブデータの構造確認</li>
<li>プロパティの設定・取得</li>
<li>境界値の処理</li>
</ul>
</li>
</ol>
<h2 id="テストの実行方法">テストの実行方法</h2>
<h3 id="前提条件">前提条件</h3>
<ul>
<li>.NET 9.0 SDK</li>
<li>xUnit テストフレームワーク</li>
<li>インターネット接続（NtpClientテストのため）</li>
</ul>
<h3 id="コマンドライン実行">コマンドライン実行</h3>
<pre><code class="lang-bash"># テストプロジェクトのディレクトリに移動
cd DailySystem/Test/DailySystemTest

# テスト実行
dotnet test

# 詳細な出力でテスト実行
dotnet test --verbosity normal

# 特定のテストクラスのみ実行
dotnet test --filter &quot;DailyMissionTest&quot;

# 特定のテストメソッドのみ実行
dotnet test --filter &quot;DailyMission_Initialization_SetsPropertiesCorrectly&quot;
</code></pre>
<h3 id="visual-studio実行">Visual Studio実行</h3>
<ol>
<li><code>DailySystemTest.sln</code> をVisual Studioで開く</li>
<li>Test Explorer から実行したいテストを選択</li>
<li>「テストの実行」をクリック</li>
</ol>
<h2 id="テストカバレッジ">テストカバレッジ</h2>
<h3 id="機能テスト">機能テスト</h3>
<ul>
<li>✅ 正常系の動作確認</li>
<li>✅ 異常系のエラーハンドリング</li>
<li>✅ 境界値テスト</li>
<li>✅ 状態変更の確認</li>
</ul>
<h3 id="エッジケーステスト">エッジケーステスト</h3>
<ul>
<li>✅ null値、空文字列の処理</li>
<li>✅ 負の値、最大値の処理</li>
<li>✅ 日付の境界値</li>
<li>✅ ネットワーク接続エラー</li>
</ul>
<h2 id="注意事項">注意事項</h2>
<h3 id="ネットワーク依存テスト">ネットワーク依存テスト</h3>
<p><code>NtpClientTest</code> はインターネット接続が必要です：</p>
<ul>
<li>接続が利用できない場合、該当テストはスキップされます</li>
<li>テスト実行時にファイアウォールの警告が表示される場合があります</li>
</ul>
<h3 id="時刻依存テスト">時刻依存テスト</h3>
<p>一部のテストは現在時刻に依存します：</p>
<ul>
<li>NTP時刻の妥当性チェック（現在時刻の前後10分以内）</li>
<li>リセット日時の設定（<code>DateTime.Now</code> 使用）</li>
</ul>
<h3 id="モック化について">モック化について</h3>
<p>現在のテストは実際のクラスを使用していますが、以下の場合にモック化を検討してください：</p>
<ul>
<li><code>DailyInfoManager</code> の統合テスト作成時</li>
<li>ファイルI/O操作のテスト時</li>
<li>より高速なテスト実行が必要な場合</li>
</ul>
<h2 id="テスト拡張ガイド">テスト拡張ガイド</h2>
<h3 id="新しいテストの追加">新しいテストの追加</h3>
<ol>
<li>適切なテストクラスファイルを作成</li>
<li><code>[Fact]</code> または <code>[Theory]</code> 属性を使用</li>
<li>AAA（Arrange-Act-Assert）パターンに従う</li>
<li>わかりやすいテストメソッド名を使用</li>
</ol>
<h3 id="テスト命名規則">テスト命名規則</h3>
<pre><code class="lang-csharp">[MethodName]_[Scenario]_[ExpectedBehavior]

例：
- UpdateProgress_ValidAmount_UpdatesCurrentCount
- GetNetworkTime_InvalidNtpServer_ThrowsException
</code></pre>
<h3 id="パラメータ化テスト">パラメータ化テスト</h3>
<p>複数の入力値をテストする場合は <code>[Theory]</code> と <code>[InlineData]</code> を使用：</p>
<pre><code class="lang-csharp">[Theory]
[InlineData(0, 10, false)]
[InlineData(5, 10, false)]
[InlineData(10, 10, true)]
public void IsCompleted_VariousScenarios_ReturnsExpectedResult(
    int currentCount, int targetCount, bool expected)
{
    // テストコード
}
</code></pre>
<h2 id="継続的インテグレーション">継続的インテグレーション</h2>
<p>このテストプロジェクトは以下のCI/CDシステムで実行できます：</p>
<ul>
<li>GitHub Actions</li>
<li>Azure DevOps</li>
<li>Jenkins</li>
<li>TeamCity</li>
</ul>
<h3 id="github-actions設定例">GitHub Actions設定例</h3>
<pre><code class="lang-yaml">name: DailySystem Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v2
    - name: Setup .NET
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: 9.0.x
        
    - name: Restore dependencies
      run: dotnet restore DailySystem/Test/DailySystemTest
      
    - name: Run tests
      run: dotnet test DailySystem/Test/DailySystemTest --verbosity normal
</code></pre>
<h2 id="トラブルシューティング">トラブルシューティング</h2>
<h3 id="よくある問題">よくある問題</h3>
<ol>
<li><p><strong>NtpClientTestが失敗する</strong></p>
<ul>
<li>インターネット接続を確認</li>
<li>ファイアウォール設定を確認</li>
<li>別のNTPサーバーでテスト</li>
</ul>
</li>
<li><p><strong>テストがタイムアウトする</strong></p>
<ul>
<li>ネットワーク接続の安定性を確認</li>
<li>テストのタイムアウト値を調整</li>
</ul>
</li>
<li><p><strong>ビルドエラー</strong></p>
<ul>
<li>.NET 9.0 SDKがインストールされているか確認</li>
<li>依存関係が正しく復元されているか確認</li>
</ul>
</li>
</ol>
<h3 id="ログ確認">ログ確認</h3>
<p>詳細なテスト実行ログを確認するには：</p>
<pre><code class="lang-bash">dotnet test --logger &quot;console;verbosity=detailed&quot;
</code></pre>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/EndlessShirafu/VaNilla/blob/develop/Documents/docfx/modules/DailySystem/Test/DailySystemTest/README.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>STEP 4: æ•µã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’å‡ºãã† </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="STEP 4: æ•µã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’å‡ºãã† ">
      
      
      <link rel="icon" href="../../../../favicon.ico">
      <link rel="stylesheet" href="../../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../../public/main.css">
      <meta name="docfx:navrel" content="../../../../toc.html">
      <meta name="docfx:tocrel" content="../../../../toc.html">
      
      
      
      
      <meta name="docfx:docurl" content="https://github.com/EndlessShirafu/VaNilla/blob/feature/apply-net10-and-csharp14/Documents/docfx/modules/VaNillaTutorial/BasicShootEmUp/STEP4_EnemyCharacters/README.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../../index.html">
            <img id="logo" class="svg" src="../../../../logo.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="step-4-æ•µã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’å‡ºãã†">STEP 4: æ•µã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’å‡ºãã†</h1>

<p>ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€ç”»é¢ä¸Šéƒ¨ã‹ã‚‰é™ã£ã¦ãã‚‹æ•µã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’å®Ÿè£…ã—ã¾ã™ã€‚æ•µã®è‡ªå‹•ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã¨ç§»å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å­¦ç¿’ã—ã¾ã™ã€‚</p>
<h2 id="-ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§å­¦ã¶ã“ã¨">ğŸ¯ ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§å­¦ã¶ã“ã¨</h2>
<ul>
<li>æ•µã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆã¨ç®¡ç†</li>
<li>å®šæœŸçš„ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ </li>
<li>ãƒ©ãƒ³ãƒ€ãƒ è¦ç´ ã‚’ä½¿ã£ãŸæ•µã®å‡ºç¾ä½ç½®</li>
<li>è¤‡æ•°ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å”èª¿å‹•ä½œ</li>
<li>RandomNumberGeneratorã®ä½¿ç”¨</li>
</ul>
<h2 id="-æ“ä½œæ–¹æ³•">ğŸ® æ“ä½œæ–¹æ³•</h2>
<ul>
<li><strong>çŸ¢å°ã‚­ãƒ¼</strong>: ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ç§»å‹•</li>
<li><strong>Shiftã‚­ãƒ¼</strong>: ä½é€Ÿç§»å‹•</li>
<li><strong>ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼</strong>: å¼¾ã‚’ç™ºå°„</li>
<li><strong>ESCã‚­ãƒ¼</strong>: çµ‚äº†</li>
</ul>
<h2 id="-æ–°ã—ãè¿½åŠ ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«">ğŸ“ æ–°ã—ãè¿½åŠ ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«</h2>
<pre><code>STEP4_EnemyCharacters/
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ image/
â”‚       â”œâ”€â”€ player.png    # ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ç”»åƒ
â”‚       â”œâ”€â”€ bullet.png    # å¼¾ã®ç”»åƒ
â”‚       â””â”€â”€ enemy.png     # æ•µã®ç”»åƒï¼ˆ32x32ãƒ”ã‚¯ã‚»ãƒ«ï¼‰
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Game.cs          # æ›´æ–°ï¼ˆæ•µç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ è¿½åŠ ï¼‰
â”‚   â”œâ”€â”€ Player.cs        # å‰å›ã‹ã‚‰ç¶™æ‰¿
â”‚   â”œâ”€â”€ Bullet.cs        # å‰å›ã‹ã‚‰ç¶™æ‰¿
â”‚   â””â”€â”€ Enemy.cs         # æ–°è¦ï¼šæ•µã‚¯ãƒ©ã‚¹
â””â”€â”€ VaNillaSettings/
    â””â”€â”€ VaNillaSettings.yaml # æ›´æ–°
</code></pre>
<h2 id="-ã‚³ãƒ¼ãƒ‰ã®å®Ÿè£…">ğŸ’» ã‚³ãƒ¼ãƒ‰ã®å®Ÿè£…</h2>
<h3 id="1-enemycs---æ•µã‚¯ãƒ©ã‚¹ã®ä½œæˆ">1. Enemy.cs - æ•µã‚¯ãƒ©ã‚¹ã®ä½œæˆ</h3>
<p><code>src/Enemy.cs</code>ã‚’ä½œæˆã—ã¾ã™ï¼š</p>
<pre><code class="lang-csharp">using VaNilla;
using VaNilla.Render;
using VaNilla.Transform;
using VaNilla.Texture;
using VaNilla.ConditionalProcessor;
using VaNilla.Time;
using VaNilla.Random;

namespace Tutorial
{
    /// &lt;summary&gt;
    /// æ•µã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’è¡¨ã™ã‚¯ãƒ©ã‚¹
    /// ç”»é¢ä¸Šéƒ¨ã‹ã‚‰ä¸‹éƒ¨ã«å‘ã‹ã£ã¦ç§»å‹•ã—ã€ç”»é¢å¤–ã«å‡ºãŸã‚‰è‡ªå‹•å‰Šé™¤ã•ã‚Œã‚‹
    /// &lt;/summary&gt;
    public class Enemy : BasicObject, HasPosition, HasTexture, 
                        FromObjectFactoryCreation, ScreenOutSelfDestruction
    {
        // === HasPositionã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£… ===
        public Point2 Position { get; set; }
        
        // === HasTextureã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£… ===
        private TextureResource texture;
        public TextureResource Texture 
        { 
            get =&gt; texture;
            set =&gt; texture = value;
        }
        
        // === ScreenOutSelfDestructionã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£… ===
        public int ScreenMargin { get; set; } = 50;  // ç”»é¢å¤–åˆ¤å®šã®ãƒãƒ¼ã‚¸ãƒ³
        
        // === æ•µã®å‹•ä½œè¨­å®š ===
        private const float BASE_SPEED = 100.0f;     // åŸºæœ¬ç§»å‹•é€Ÿåº¦ï¼ˆãƒ”ã‚¯ã‚»ãƒ«/ç§’ï¼‰
        private const int ENEMY_SIZE = 32;           // æ•µã®ã‚µã‚¤ã‚º
        
        // === æ•µã®å€‹åˆ¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ ===
        private float moveSpeed;                     // ã“ã®æ•µã®ç§»å‹•é€Ÿåº¦
        private float horizontalSpeed;               // æ¨ªæ–¹å‘ã®ç§»å‹•é€Ÿåº¦
        private EnemyType enemyType;                 // æ•µã®ã‚¿ã‚¤ãƒ—
        
        /// &lt;summary&gt;
        /// æ•µã®ã‚¿ã‚¤ãƒ—åˆ—æŒ™å‹
        /// &lt;/summary&gt;
        public enum EnemyType
        {
            Straight,    // ç›´é€²ã‚¿ã‚¤ãƒ—
            Zigzag,      // ã‚¸ã‚°ã‚¶ã‚°ã‚¿ã‚¤ãƒ—
            Fast         // é«˜é€Ÿã‚¿ã‚¤ãƒ—
        }
        
        /// &lt;summary&gt;
        /// æ•µã‚’æŒ‡å®šä½ç½®ã¨è¨­å®šã§åˆæœŸåŒ–
        /// &lt;/summary&gt;
        public void Initialize(int x, int y, EnemyType type = EnemyType.Straight)
        {
            Position = new Point2(x, y);
            enemyType = type;
            
            // æ•µã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦å‹•ä½œãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®š
            switch (enemyType)
            {
                case EnemyType.Straight:
                    moveSpeed = BASE_SPEED;
                    horizontalSpeed = 0;
                    break;
                    
                case EnemyType.Zigzag:
                    moveSpeed = BASE_SPEED * 0.8f;  // å°‘ã—é…ã‚ã«
                    horizontalSpeed = 80.0f;        // æ¨ªç§»å‹•é€Ÿåº¦
                    break;
                    
                case EnemyType.Fast:
                    moveSpeed = BASE_SPEED * 1.5f;  // é«˜é€Ÿ
                    horizontalSpeed = 0;
                    break;
            }
            
            // åˆå›ã®ã¿ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’ãƒ­ãƒ¼ãƒ‰
            if (Texture == null)
            {
                Texture = TextureResourceManager.GetTextureResource(TextureResourceType.Enemy);
            }
            
            Logger.Log($&quot;æ•µã‚’ç”Ÿæˆ: ã‚¿ã‚¤ãƒ—={enemyType}, ä½ç½®=({x}, {y})&quot;);
        }
        
        public override void Setup()
        {
            // ObjectFactoryã‹ã‚‰ç”Ÿæˆã•ã‚Œã‚‹å ´åˆã€Initializeã§åˆæœŸåŒ–ã•ã‚Œã‚‹
        }
        
        public override void Update()
        {
            // æ•µã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸç§»å‹•å‡¦ç†
            switch (enemyType)
            {
                case EnemyType.Straight:
                    MoveStraight();
                    break;
                    
                case EnemyType.Zigzag:
                    MoveZigzag();
                    break;
                    
                case EnemyType.Fast:
                    MoveStraight();  // é«˜é€Ÿç›´é€²
                    break;
            }
            
            // ScreenOutSelfDestructionãŒè‡ªå‹•çš„ã«ç”»é¢å¤–åˆ¤å®šã‚’è¡Œã†
        }
        
        /// &lt;summary&gt;
        /// ç›´é€²ç§»å‹•
        /// &lt;/summary&gt;
        private void MoveStraight()
        {
            float deltaY = moveSpeed * TimeManager.DeltaTime;
            Position = new Point2(Position.X, Position.Y + (int)deltaY);
        }
        
        /// &lt;summary&gt;
        /// ã‚¸ã‚°ã‚¶ã‚°ç§»å‹•
        /// &lt;/summary&gt;
        private void MoveZigzag()
        {
            // ä¸‹æ–¹å‘ã¸ã®ç§»å‹•
            float deltaY = moveSpeed * TimeManager.DeltaTime;
            
            // å·¦å³ã¸ã®æŒ¯å‹•ç§»å‹•ï¼ˆã‚µã‚¤ãƒ³æ³¢ï¼‰
            float time = TimeManager.TotalTime;  // ã‚²ãƒ¼ãƒ é–‹å§‹ã‹ã‚‰ã®çµŒéæ™‚é–“
            float deltaX = (float)System.Math.Sin(time * 3.0) * horizontalSpeed * TimeManager.DeltaTime;
            
            // ç”»é¢ç«¯ã§ã®ã‚¯ãƒ©ãƒ³ãƒ—å‡¦ç†
            int newX = Position.X + (int)deltaX;
            newX = MathUtil.Clamp(newX, ENEMY_SIZE / 2, 640 - ENEMY_SIZE / 2);
            
            Position = new Point2(newX, Position.Y + (int)deltaY);
        }
        
        public override void Draw()
        {
            // æ•µã‚’æç”»
            BasicRenderer.Render(this);
            
            // ãƒ‡ãƒãƒƒã‚°ç”¨ï¼šæ•µã‚¿ã‚¤ãƒ—ã‚’è¡¨ç¤ºï¼ˆç”»é¢ä¸Šéƒ¨ã«å°ã•ãï¼‰
            if (Position.Y &lt; 100)  // ç”»é¢ä¸Šéƒ¨ã®æ•µã®ã¿
            {
                string typeText = enemyType.ToString().Substring(0, 1);  // æœ€åˆã®1æ–‡å­—
                Utils.DrawString(typeText, Position.X - 5, Position.Y - 20, (255, 255, 0));
            }
        }
        
        /// &lt;summary&gt;
        /// æ•µãŒç ´å£Šã•ã‚ŒãŸæ™‚ã®å‡¦ç†ï¼ˆSTEP5ã§ä½¿ç”¨ï¼‰
        /// &lt;/summary&gt;
        public void OnDestroyed()
        {
            // ç ´å£Šã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚„ã‚¹ã‚³ã‚¢åŠ ç®—ã¯STEP5ã§å®Ÿè£…
            Logger.Log($&quot;æ•µãŒç ´å£Šã•ã‚Œã¾ã—ãŸ: ã‚¿ã‚¤ãƒ—={enemyType}&quot;);
            
            // è‡ªåˆ†è‡ªèº«ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–
            ObjectActivator.Deactivate(this);
        }
        
        public override void OnDeactivate()
        {
            base.OnDeactivate();
        }
    }
}
</code></pre>
<h3 id="2-gamecs---æ•µç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã®è¿½åŠ ">2. Game.cs - æ•µç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã®è¿½åŠ </h3>
<p><code>src/Game.cs</code>ã‚’æ›´æ–°ã—ã¾ã™ï¼š</p>
<pre><code class="lang-csharp">using VaNilla;
using VaNilla.Renderer;
using VaNilla.Keyboard;
using VaNilla.Fps;
using VaNilla.SupremeArbiter;
using VaNilla.ObjectExecutor;
using VaNilla.ObjectFactory;
using VaNilla.Random;
using VaNilla.Time;

namespace Tutorial
{
    /// &lt;summary&gt;
    /// ã‚²ãƒ¼ãƒ ã®ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹
    /// STEP4: æ•µç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã‚’è¿½åŠ 
    /// &lt;/summary&gt;
    public class Game : BasicObject
    {
        private Player player;
        
        // === æ•µç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ  ===
        private const float ENEMY_SPAWN_INTERVAL = 2.0f;    // æ•µç”Ÿæˆé–“éš”ï¼ˆç§’ï¼‰
        private float enemySpawnTimer = 0.0f;               // æ•µç”Ÿæˆã‚¿ã‚¤ãƒãƒ¼
        private const int ENEMY_SPAWN_Y = -20;              // æ•µã®ç”ŸæˆYåº§æ¨™
        private const int SCREEN_WIDTH = 640;               // ç”»é¢å¹…
        
        // === ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç† ===
        private float gameTime = 0.0f;                      // ã‚²ãƒ¼ãƒ çµŒéæ™‚é–“
        private int enemiesSpawned = 0;                     // ç”Ÿæˆã—ãŸæ•µã®ç·æ•°
        
        public override void Setup()
        {
            Logger.Log(&quot;STEP4: æ•µã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’å‡ºãã†&quot;);
            
            // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ä½œæˆ
            player = ObjectActivator.Activate&lt;Player&gt;();
            
            // ãƒ©ãƒ³ãƒ€ãƒ ã‚·ãƒ¼ãƒ‰ã‚’è¨­å®šï¼ˆæ™‚é–“ãƒ™ãƒ¼ã‚¹ï¼‰
            RandomNumberGenerator.SetSeed((uint)System.DateTime.Now.Millisecond);
            
            // æœ€åˆã®æ•µç”Ÿæˆã‚¿ã‚¤ãƒãƒ¼ã‚’è¨­å®š
            enemySpawnTimer = ENEMY_SPAWN_INTERVAL;
        }

        public override void Update()
        {
            // ç”»é¢ã‚’ã‚¯ãƒªã‚¢
            Utils.ClearScreen((20, 20, 60));
            
            // ã‚²ãƒ¼ãƒ æ™‚é–“ã‚’æ›´æ–°
            gameTime += TimeManager.DeltaTime;
            
            // æ•µç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã®æ›´æ–°
            UpdateEnemySpawning();
            
            // ESCã‚­ãƒ¼ã§çµ‚äº†
            if (KeyboardInput.IsPushedMoment(KeyCode.Escape))
            {
                Logger.Log(&quot;ESCã‚­ãƒ¼ãŒæŠ¼ã•ã‚Œã¾ã—ãŸã€‚çµ‚äº†ã—ã¾ã™ã€‚&quot;);
                SupremeArbiter.Shutdown();
            }
        }
        
        /// &lt;summary&gt;
        /// æ•µç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã®æ›´æ–°
        /// &lt;/summary&gt;
        private void UpdateEnemySpawning()
        {
            // æ•µç”Ÿæˆã‚¿ã‚¤ãƒãƒ¼ã‚’æ›´æ–°
            enemySpawnTimer -= TimeManager.DeltaTime;
            
            // ç”Ÿæˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«åˆ°é”ã—ãŸå ´åˆ
            if (enemySpawnTimer &lt;= 0)
            {
                SpawnEnemy();
                
                // æ¬¡ã®ç”Ÿæˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è¨­å®šï¼ˆæ™‚é–“çµŒéã§å°‘ã—çŸ­ãã™ã‚‹ï¼‰
                float speedUpFactor = 1.0f - (gameTime * 0.01f);  // æ™‚é–“çµŒéã§1%ãšã¤çŸ­ç¸®
                speedUpFactor = MathUtil.Clamp(speedUpFactor, 0.3f, 1.0f);  // æœ€å¤§70%çŸ­ç¸®
                
                enemySpawnTimer = ENEMY_SPAWN_INTERVAL * speedUpFactor;
            }
        }
        
        /// &lt;summary&gt;
        /// æ•µã‚’ç”Ÿæˆ
        /// &lt;/summary&gt;
        private void SpawnEnemy()
        {
            // ObjectFactoryã‹ã‚‰æ•µã‚’å–å¾—
            var enemy = ObjectFactory.Rent&lt;Enemy&gt;(ObjectTagEnum.Enemy);
            
            if (enemy != null)
            {
                // ãƒ©ãƒ³ãƒ€ãƒ ãªXåº§æ¨™ã‚’æ±ºå®šï¼ˆç”»é¢ç«¯ã‹ã‚‰32ãƒ”ã‚¯ã‚»ãƒ«é›¢ã™ï¼‰
                int minX = 32;
                int maxX = SCREEN_WIDTH - 32;
                int randomX = RandomNumberGenerator.GetRandomInt(minX, maxX);
                
                // æ•µã‚¿ã‚¤ãƒ—ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«æ±ºå®šï¼ˆæ™‚é–“çµŒéã§é«˜é›£æ˜“åº¦ã‚¿ã‚¤ãƒ—ãŒå‡ºã‚„ã™ãï¼‰
                Enemy.EnemyType enemyType = DetermineEnemyType();
                
                // æ•µã‚’åˆæœŸåŒ–
                enemy.Initialize(randomX, ENEMY_SPAWN_Y, enemyType);
                
                // ç”Ÿæˆã‚«ã‚¦ãƒ³ãƒˆã‚’å¢—åŠ 
                enemiesSpawned++;
                
                Logger.Log($&quot;æ•µã‚’ç”Ÿæˆ: #{enemiesSpawned}, X={randomX}, ã‚¿ã‚¤ãƒ—={enemyType}&quot;);
            }
            else
            {
                Logger.Log(&quot;æ•µã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ«ãŒæº€æ¯ã§ã™&quot;);
            }
        }
        
        /// &lt;summary&gt;
        /// æ•µã®ã‚¿ã‚¤ãƒ—ã‚’æ±ºå®šï¼ˆæ™‚é–“çµŒéã§é›£ã—ã„ã‚¿ã‚¤ãƒ—ãŒå‡ºã‚„ã™ããªã‚‹ï¼‰
        /// &lt;/summary&gt;
        private Enemy.EnemyType DetermineEnemyType()
        {
            float timeProgress = gameTime / 60.0f;  // 60ç§’ã§æœ€å¤§é›£æ˜“åº¦
            timeProgress = MathUtil.Clamp(timeProgress, 0.0f, 1.0f);
            
            int randomValue = RandomNumberGenerator.GetRandomInt(0, 100);
            
            // æ™‚é–“çµŒéã«å¿œã˜ã¦ç¢ºç‡ã‚’å¤‰æ›´
            if (randomValue &lt; 60 - (timeProgress * 20))  // 60% â†’ 40%
            {
                return Enemy.EnemyType.Straight;
            }
            else if (randomValue &lt; 85 - (timeProgress * 10))  // 25% â†’ 15%
            {
                return Enemy.EnemyType.Zigzag;
            }
            else  // 15% â†’ 45%
            {
                return Enemy.EnemyType.Fast;
            }
        }

        public override void Draw()
        {
            // ã‚¿ã‚¤ãƒˆãƒ«
            Utils.DrawString(
                &quot;STEP 4: Enemy Characters&quot;, 
                10, 10,
                (255, 255, 255)
            );
            
            // æ“ä½œèª¬æ˜
            Utils.DrawString(
                &quot;Arrow: Move | Space: Fire | Shift: Slow | ESC: Exit&quot;,
                10, 30,
                (200, 200, 200)
            );
            
            // ã‚²ãƒ¼ãƒ æƒ…å ±
            Utils.DrawString(
                $&quot;Game Time: {gameTime:F1}s | Enemies Spawned: {enemiesSpawned}&quot;,
                10, 50,
                (255, 255, 0)
            );
            
            // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ•°æƒ…å ±
            int totalObjects = ObjectExecutor.GetActiveObjectCount();
            int playerCount = ObjectExecutor.GetActiveObjectCount&lt;Player&gt;();
            int bulletCount = ObjectExecutor.GetActiveObjectCount&lt;Bullet&gt;();
            int enemyCount = ObjectExecutor.GetActiveObjectCount&lt;Enemy&gt;();
            
            Utils.DrawString(
                $&quot;Objects - Total: {totalObjects} | Player: {playerCount} | Bullets: {bulletCount} | Enemies: {enemyCount}&quot;,
                10, 70,
                (100, 255, 100)
            );
            
            // æ¬¡ã®æ•µç”Ÿæˆã¾ã§ã®æ™‚é–“
            Utils.DrawString(
                $&quot;Next Enemy in: {enemySpawnTimer:F1}s&quot;,
                10, 90,
                (255, 200, 100)
            );
            
            // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ«æƒ…å ±
            var bulletPoolInfo = ObjectFactory.GetPoolInfo&lt;Bullet&gt;();
            var enemyPoolInfo = ObjectFactory.GetPoolInfo&lt;Enemy&gt;();
            
            if (bulletPoolInfo != null &amp;&amp; enemyPoolInfo != null)
            {
                Utils.DrawString(
                    $&quot;Pools - Bullets: {bulletPoolInfo.ActiveCount}/{bulletPoolInfo.PoolSize} | Enemies: {enemyPoolInfo.ActiveCount}/{enemyPoolInfo.PoolSize}&quot;,
                    10, 110,
                    (150, 150, 255)
                );
            }
            
            // FPSè¡¨ç¤º
            Utils.DrawString(
                $&quot;FPS: {FpsCalculator.CurrentFps:F1}&quot;,
                540, 10,
                (0, 255, 0)
            );
        }
    }
}
</code></pre>
<h3 id="3-playercs-bulletcs---å‰ã‚¹ãƒ†ãƒƒãƒ—ã‹ã‚‰ç¶™æ‰¿">3. Player.cs, Bullet.cs - å‰ã‚¹ãƒ†ãƒƒãƒ—ã‹ã‚‰ç¶™æ‰¿</h3>
<p>å‰ã‚¹ãƒ†ãƒƒãƒ—ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä½¿ç”¨ã—ã¾ã™ã€‚</p>
<h3 id="4-vanillasettingsyaml---æ•µè¨­å®šã®è¿½åŠ ">4. VaNillaSettings.yaml - æ•µè¨­å®šã®è¿½åŠ </h3>
<p><code>VaNillaSettings/VaNillaSettings.yaml</code>ã‚’æ›´æ–°ã—ã¾ã™ï¼š</p>
<pre><code class="lang-yaml"># ã‚²ãƒ¼ãƒ ã®åŸºæœ¬è¨­å®š
supreme_arbiter_setting:
  target_fps: 60.0
  window_title: &quot;VaNilla Tutorial - STEP 4&quot;

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºè¨­å®š
window_size:
  - [640, 480]

# ç”»é¢è§£åƒåº¦è¨­å®š  
screen_resolution:
  - [[640, 480], [4, 3]]

# ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆè§£åƒåº¦
viewport_resolution: [640, 480]

# ã‚­ãƒ¼ã‚³ãƒ³ãƒ•ã‚£ã‚°è¨­å®š
key_config:
  Up:
    default_keyboard: Up
  Down:
    default_keyboard: Down
  Left:
    default_keyboard: Left
  Right:
    default_keyboard: Right
  Decide:
    default_keyboard: Z
  Cancel:
    default_keyboard: X

# ãƒ†ã‚¯ã‚¹ãƒãƒ£ãƒªã‚½ãƒ¼ã‚¹ã®å®šç¾©
texture_pool:
  Player:
    path: image/player.png
    category: game
    type: full_one_shot
  Bullet:
    path: image/bullet.png
    category: game
    type: full_one_shot
  Enemy:                       # æ–°è¦è¿½åŠ 
    path: image/enemy.png
    category: game
    type: full_one_shot

# ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒªã‚¹ãƒˆã®å®šç¾©
object_list:
  Game:
    object_num: 1
    type: Tutorial.Game
  Player:
    object_num: 10
    type: Tutorial.Player
  Bullet:
    object_num: 100
    type: Tutorial.Bullet
    create_pool: true
  Enemy:                       # æ–°è¦è¿½åŠ 
    object_num: 50            # æœ€å¤§50ä½“ã®æ•µã‚’ç®¡ç†
    type: Tutorial.Enemy
    create_pool: true         # ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ«ã‚’ä½¿ç”¨

# ã‚¿ã‚¤ãƒãƒ¼è¨­å®š
user_timer:
  - FrameTimer
  - GameTimer

# å®Ÿè¡Œé †åºè¨­å®š
execution_order:
  SCREEN_CLEAR: -50
  EARLY: -10
  NORMAL: 0
  DRAW_NORMAL: 80
  LATE: 130
  PRVILEGE_DRAW: 170
  SCENE_TRANSITION: 180
  SCREEN_RENDER: 190

# ã‚·ãƒ¼ãƒ³å®šç¾©
scene_state:
  Main:
    group: 0
    transit: []

# ã‚³ãƒªã‚¸ãƒ§ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—è¨­å®š
collision_group_settings:
  Default:
    number: 0
    collide_with:
      - Default
</code></pre>
<h2 id="-é‡è¦ãªæ¦‚å¿µ">ğŸ”‘ é‡è¦ãªæ¦‚å¿µ</h2>
<h3 id="randomnumbergenerator">RandomNumberGenerator</h3>
<ul>
<li>VaNillaã®ä¹±æ•°ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ </li>
<li><code>GetRandomInt(min, max)</code>: æŒ‡å®šç¯„å›²ã®æ•´æ•°ä¹±æ•°</li>
<li><code>SetSeed()</code>: ã‚·ãƒ¼ãƒ‰å€¤ã®è¨­å®š</li>
</ul>
<h3 id="æ•µã‚¿ã‚¤ãƒ—ã‚·ã‚¹ãƒ†ãƒ ">æ•µã‚¿ã‚¤ãƒ—ã‚·ã‚¹ãƒ†ãƒ </h3>
<ul>
<li>åˆ—æŒ™å‹ã«ã‚ˆã‚‹æ•µã®ç¨®é¡åˆ†ã‘</li>
<li>ã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸç•°ãªã‚‹ç§»å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³</li>
<li>æ™‚é–“çµŒéã«ã‚ˆã‚‹é›£æ˜“åº¦èª¿æ•´</li>
</ul>
<h3 id="å‹•çš„é›£æ˜“åº¦èª¿æ•´">å‹•çš„é›£æ˜“åº¦èª¿æ•´</h3>
<ul>
<li>ã‚²ãƒ¼ãƒ æ™‚é–“ã«å¿œã˜ãŸæ•µç”Ÿæˆé–“éš”ã®çŸ­ç¸®</li>
<li>é«˜é›£æ˜“åº¦æ•µã‚¿ã‚¤ãƒ—ã®å‡ºç¾ç¢ºç‡ä¸Šæ˜‡</li>
<li>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã‚¹ã‚­ãƒ«å‘ä¸Šã«åˆã‚ã›ãŸèª¿æ•´</li>
</ul>
<h3 id="ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ«ç®¡ç†">ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ«ç®¡ç†</h3>
<ul>
<li>è¤‡æ•°ç¨®é¡ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®åŠ¹ç‡çš„ç®¡ç†</li>
<li>ãƒ—ãƒ¼ãƒ«ä½¿ç”¨çŠ¶æ³ã®ç›£è¦–</li>
<li>ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ã®æœ€é©åŒ–</li>
</ul>
<h2 id="-å®Ÿè¡Œã—ã¦ç¢ºèª">ğŸ® å®Ÿè¡Œã—ã¦ç¢ºèª</h2>
<ol>
<li>ç”»é¢ä¸Šéƒ¨ã‹ã‚‰æ•µãŒå®šæœŸçš„ã«å‡ºç¾ã™ã‚‹ã“ã¨ã‚’ç¢ºèª</li>
<li>3ç¨®é¡ã®æ•µã‚¿ã‚¤ãƒ—ï¼ˆç›´é€²ã€ã‚¸ã‚°ã‚¶ã‚°ã€é«˜é€Ÿï¼‰ãŒå‡ºç¾ã™ã‚‹ã“ã¨ã‚’ç¢ºèª</li>
<li>æ™‚é–“çµŒéã§æ•µã®å‡ºç¾é–“éš”ãŒçŸ­ããªã‚‹ã“ã¨ã‚’ç¢ºèª</li>
<li>æ•µãŒç”»é¢ä¸‹éƒ¨ã«åˆ°é”ã™ã‚‹ã¨è‡ªå‹•çš„ã«å‰Šé™¤ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª</li>
<li>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ«ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª</li>
</ol>
<h2 id="-å­¦ã‚“ã ã“ã¨">ğŸ“ å­¦ã‚“ã ã“ã¨</h2>
<p>âœ… æ•µã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å®Ÿè£…ã¨ç®¡ç†<br>
âœ… å®šæœŸçš„ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ <br>
âœ… RandomNumberGeneratorã®ä½¿ç”¨<br>
âœ… åˆ—æŒ™å‹ã‚’ä½¿ã£ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¿ã‚¤ãƒ—ç®¡ç†<br>
âœ… å‹•çš„é›£æ˜“åº¦èª¿æ•´ã‚·ã‚¹ãƒ†ãƒ <br>
âœ… è¤‡æ•°ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ«ã®ç®¡ç†</p>
<h2 id="-ãƒãƒ£ãƒ¬ãƒ³ã‚¸èª²é¡Œ">ğŸ¤” ãƒãƒ£ãƒ¬ãƒ³ã‚¸èª²é¡Œ</h2>
<ol>
<li>æ–°ã—ã„æ•µã‚¿ã‚¤ãƒ—ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼ˆå††é‹å‹•ã€åŠ é€Ÿãªã©ï¼‰</li>
<li>æ•µã®ç”Ÿæˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å¤‰æ›´ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼ˆç·¨éšŠã€æ³¢çŠ¶æ”»æ’ƒãªã©ï¼‰</li>
<li>æ•µã«HPã‚’æŒãŸã›ã¦è¤‡æ•°å›ã®æ”»æ’ƒã§å€’ã›ã‚‹ã‚ˆã†ã«ã—ã¦ã¿ã¾ã—ã‚‡ã†</li>
<li>æ•µãŒå¼¾ã‚’æ’ƒã¤æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ã‚‡ã†</li>
</ol>
<h2 id="-æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—">â­ï¸ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h2>
<p>STEP 5ã§ã¯ã€å¼¾ã¨æ•µã®å½“ãŸã‚Šåˆ¤å®šã‚’å®Ÿè£…ã—ã€æ•µã‚’æ’ƒç ´ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/EndlessShirafu/VaNilla/blob/feature/apply-net10-and-csharp14/Documents/docfx/modules/VaNillaTutorial/BasicShootEmUp/STEP4_EnemyCharacters/README.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>

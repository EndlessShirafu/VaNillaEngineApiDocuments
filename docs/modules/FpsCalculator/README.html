<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>FpsCalculator </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="FpsCalculator ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../../toc.html">
      
      
      
      
      <meta name="docfx:docurl" content="https://github.com/EndlessShirafu/VaNilla/blob/develop/Documents/docfx/modules/FpsCalculator/README.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="fpscalculator">FpsCalculator</h1>

<p>VaNillaã‚¨ãƒ³ã‚¸ãƒ³ã®FPSè¨ˆæ¸¬ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã™ã€‚ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆè¨ˆæ¸¬ã¨è©³ç´°ãªæ€§èƒ½çµ±è¨ˆã‚’æä¾›ã—ã¾ã™ã€‚</p>
<h2 id="æ¦‚è¦">æ¦‚è¦</h2>
<p>FpsCalculatorã¯ã€ã‚²ãƒ¼ãƒ ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ç›£è¦–ã™ã‚‹ãŸã‚ã®è»½é‡ã‹ã¤é«˜æ©Ÿèƒ½ãªFPSè¨ˆæ¸¬ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚<br>
åŸºæœ¬çš„ãªFPSè¡¨ç¤ºã‹ã‚‰ã€ãƒ•ãƒ¬ãƒ¼ãƒ ã‚¿ã‚¤ãƒ ã®çµ±è¨ˆåˆ†æã¾ã§ã€ãƒ‡ãƒãƒƒã‚°ã¨æœ€é©åŒ–ã«å¿…è¦ãªæƒ…å ±ã‚’æä¾›ã—ã¾ã™ã€‚</p>
<h3 id="ä¸»ãªç‰¹å¾´">ä¸»ãªç‰¹å¾´</h3>
<ul>
<li>ğŸ¯ <strong>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ FPSè¨ˆæ¸¬</strong> - 0.5ç§’é–“éš”ã§æ›´æ–°ã•ã‚Œã‚‹æ»‘ã‚‰ã‹ãªFPSè¡¨ç¤º</li>
<li>ğŸ“Š <strong>è©³ç´°ãªçµ±è¨ˆæƒ…å ±</strong> - æœ€å°/æœ€å¤§/å¹³å‡FPSã€ãƒ•ãƒ¬ãƒ¼ãƒ ã‚¿ã‚¤ãƒ ã‚’ãƒŸãƒªç§’å˜ä½ã§è¨ˆæ¸¬</li>
<li>ğŸ”§ <strong>ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ éä¾å­˜</strong> - Unity/DxLibé–¢ä¿‚ãªãå‹•ä½œã™ã‚‹ç´”ç²‹ãªC#å®Ÿè£…</li>
<li>âš¡ <strong>è»½é‡è¨­è¨ˆ</strong> - ã‚²ãƒ¼ãƒ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿ã‚’æœ€å°é™ã«æŠ‘åˆ¶</li>
</ul>
<h2 id="ä½¿ã„æ–¹">ä½¿ã„æ–¹</h2>
<h3 id="åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•">åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•</h3>
<pre><code class="lang-csharp">// åˆæœŸåŒ–ï¼ˆã‚²ãƒ¼ãƒ é–‹å§‹æ™‚ï¼‰
FpsCalculator.Initialize(60.0f);  // ç›®æ¨™FPSã‚’60ã«è¨­å®š

// æ›´æ–°ï¼ˆæ¯ãƒ•ãƒ¬ãƒ¼ãƒ å‘¼ã³å‡ºã—ï¼‰
FpsCalculator.Update(TimeManager.GetCurrentTime());

// FPSå–å¾—
float currentFps = FpsCalculator.GetFps();
float targetFps = FpsCalculator.GetTargetFps();
</code></pre>
<h3 id="é«˜æ©Ÿèƒ½è¨ˆæ¸¬ãƒ¢ãƒ¼ãƒ‰">é«˜æ©Ÿèƒ½è¨ˆæ¸¬ãƒ¢ãƒ¼ãƒ‰</h3>
<p>è©³ç´°ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æãŒå¿…è¦ãªå ´åˆï¼š</p>
<pre><code class="lang-csharp">// è¨ˆæ¸¬é–‹å§‹
FpsCalculator.StartMeasurement();

// ... ã‚²ãƒ¼ãƒ ã‚’å®Ÿè¡Œ ...

// çµ±è¨ˆæƒ…å ±ã®å–å¾—
float avgFps = FpsCalculator.GetAverageFps();
float minFps = FpsCalculator.GetMinFps();
float maxFps = FpsCalculator.GetMaxFps();
float avgFrameTime = FpsCalculator.GetAverageFrameTimeMs();  // ãƒŸãƒªç§’

// è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆã®å‡ºåŠ›
string report = FpsCalculator.GetDetailedInfo();
Debug.Logger.Log(report);

// è¨ˆæ¸¬åœæ­¢
FpsCalculator.StopMeasurement();
</code></pre>
<h3 id="expressercomponentã¨ã®é€£æºä¾‹">ExpresserComponentã¨ã®é€£æºä¾‹</h3>
<pre><code class="lang-csharp">[DefaultExpresserComponent(typeof(FpsDisplay))]
public partial class DebugOverlay : Object
{
    private FpsDisplay fpsDisplay;
    
    public override bool SetUp()
    {
        fpsDisplay.Position = new Point2(10, 10);
        fpsDisplay.FontSize = 16;
        fpsDisplay.Color = Color.Green;
        return true;
    }
}
</code></pre>
<h2 id="api-ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹">API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</h2>
<h3 id="åŸºæœ¬æ©Ÿèƒ½">åŸºæœ¬æ©Ÿèƒ½</h3>
<table>
<thead>
<tr>
<th>ãƒ¡ã‚½ãƒƒãƒ‰</th>
<th>èª¬æ˜</th>
<th>æˆ»ã‚Šå€¤</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Initialize(float fps)</code></td>
<td>ç›®æ¨™FPSã‚’è¨­å®šã—ã¦åˆæœŸåŒ–</td>
<td>void</td>
</tr>
<tr>
<td><code>Update(float currentTime)</code></td>
<td>ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã«å‘¼ã³å‡ºã—ï¼ˆæ™‚åˆ»ã‚’æ¸¡ã™ï¼‰</td>
<td>void</td>
</tr>
<tr>
<td><code>GetFps()</code></td>
<td>ç¾åœ¨ã®FPSã‚’å–å¾—</td>
<td>float</td>
</tr>
<tr>
<td><code>GetTargetFps()</code></td>
<td>ç›®æ¨™FPSã‚’å–å¾—</td>
<td>float</td>
</tr>
</tbody>
</table>
<h3 id="é«˜æ©Ÿèƒ½è¨ˆæ¸¬">é«˜æ©Ÿèƒ½è¨ˆæ¸¬</h3>
<table>
<thead>
<tr>
<th>ãƒ¡ã‚½ãƒƒãƒ‰</th>
<th>èª¬æ˜</th>
<th>æˆ»ã‚Šå€¤</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>StartMeasurement()</code></td>
<td>è©³ç´°è¨ˆæ¸¬ã‚’é–‹å§‹</td>
<td>void</td>
</tr>
<tr>
<td><code>StopMeasurement()</code></td>
<td>è¨ˆæ¸¬ã‚’åœæ­¢</td>
<td>void</td>
</tr>
<tr>
<td><code>ResetMeasurement()</code></td>
<td>è¨ˆæ¸¬ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªã‚¢</td>
<td>void</td>
</tr>
<tr>
<td><code>GetCurrentFrameTimeMs()</code></td>
<td>ç¾åœ¨ã®ãƒ•ãƒ¬ãƒ¼ãƒ æ™‚é–“ï¼ˆãƒŸãƒªç§’ï¼‰</td>
<td>float</td>
</tr>
<tr>
<td><code>GetCurrentFpsDetailed()</code></td>
<td>ç¾åœ¨ã®FPSï¼ˆå°æ•°ç‚¹3æ¡ï¼‰</td>
<td>float</td>
</tr>
<tr>
<td><code>GetAverageFps()</code></td>
<td>å¹³å‡FPS</td>
<td>float</td>
</tr>
<tr>
<td><code>GetMinFps()</code></td>
<td>æœ€å°FPS</td>
<td>float</td>
</tr>
<tr>
<td><code>GetMaxFps()</code></td>
<td>æœ€å¤§FPS</td>
<td>float</td>
</tr>
<tr>
<td><code>GetAverageFrameTimeMs()</code></td>
<td>å¹³å‡ãƒ•ãƒ¬ãƒ¼ãƒ æ™‚é–“ï¼ˆãƒŸãƒªç§’ï¼‰</td>
<td>float</td>
</tr>
<tr>
<td><code>GetMeasurementDuration()</code></td>
<td>è¨ˆæ¸¬çµŒéæ™‚é–“</td>
<td>float</td>
</tr>
<tr>
<td><code>GetDetailedInfo()</code></td>
<td>è©³ç´°æƒ…å ±ã®æ–‡å­—åˆ—</td>
<td>string</td>
</tr>
<tr>
<td><code>SetAveragePeriod(int frames)</code></td>
<td>å¹³å‡è¨ˆç®—æœŸé–“ã‚’è¨­å®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ60ï¼‰</td>
<td>void</td>
</tr>
</tbody>
</table>
<h2 id="è©³ç´°æƒ…å ±ã®å‡ºåŠ›ä¾‹">è©³ç´°æƒ…å ±ã®å‡ºåŠ›ä¾‹</h2>
<pre><code>=== FPS Performance Report ===
Current: 59.8 FPS (16.7ms)
Average: 58.5 FPS (17.1ms)
Min: 45.2 FPS
Max: 60.1 FPS
Duration: 120.5 seconds
Samples: 60 frames
</code></pre>
<h2 id="è¨­è¨ˆæ€æƒ³">è¨­è¨ˆæ€æƒ³</h2>
<h3 id="ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ éä¾å­˜">ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ éä¾å­˜</h3>
<p>FpsCalculatorã¯å¤–éƒ¨ã‹ã‚‰æ™‚åˆ»ã‚’å—ã‘å–ã‚‹è¨­è¨ˆã«ã‚ˆã‚Šã€ã©ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã‚‚å‹•ä½œã—ã¾ã™ï¼š</p>
<ul>
<li>DxLib: <code>DX.GetNowCount()</code> ã‚’ä½¿ç”¨</li>
<li>Unity: <code>Time.time</code> ã‚’ä½¿ç”¨</li>
<li>ãã®ä»–: ä»»æ„ã®æ™‚åˆ»ã‚·ã‚¹ãƒ†ãƒ ã«å¯¾å¿œ</li>
</ul>
<h3 id="è»½é‡å®Ÿè£…">è»½é‡å®Ÿè£…</h3>
<ul>
<li>é™çš„ã‚¯ãƒ©ã‚¹ã«ã‚ˆã‚‹ã‚¼ãƒ­ã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆ</li>
<li><code>Queue&lt;float&gt;</code> ã«ã‚ˆã‚‹åŠ¹ç‡çš„ãªã‚¹ãƒ©ã‚¤ãƒ‡ã‚£ãƒ³ã‚°ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦</li>
<li>0.5ç§’é–“éš”ã®æ›´æ–°ã§è¡¨ç¤ºã®å®‰å®šæ€§ã‚’ç¢ºä¿</li>
</ul>
<h2 id="ä½¿ç”¨ä¸Šã®æ³¨æ„">ä½¿ç”¨ä¸Šã®æ³¨æ„</h2>
<ol>
<li><p><strong>Update()ã¯1ãƒ•ãƒ¬ãƒ¼ãƒ ã«1å›ã ã‘å‘¼ã³å‡ºã™</strong><br>
è¤‡æ•°å›å‘¼ã¶ã¨FPSè¨ˆæ¸¬ãŒç‹‚ã„ã¾ã™</p>
</li>
<li><p><strong>æ™‚åˆ»ã¯å˜èª¿å¢—åŠ ã™ã‚‹å€¤ã‚’ä½¿ç”¨</strong><br>
å·»ãæˆ»ã‚ŠãŒã‚ã‚‹æ™‚åˆ»ã‚’ä½¿ã†ã¨æ­£ã—ãè¨ˆæ¸¬ã§ãã¾ã›ã‚“</p>
</li>
<li><p><strong>é«˜æ©Ÿèƒ½è¨ˆæ¸¬ã¯å¿…è¦æ™‚ã®ã¿ä½¿ç”¨</strong><br>
å¸¸æ™‚ONã«ã™ã‚‹ã¨è‹¥å¹²ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒç™ºç”Ÿã—ã¾ã™</p>
</li>
</ol>
<h2 id="é–¢é€£ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«">é–¢é€£ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</h2>
<ul>
<li><a href="../TimeManager/README.html">TimeManager</a> - æ™‚é–“ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </li>
<li><a href="../PerformanceProfiler/README.html">PerformanceProfiler</a> - ã‚ˆã‚Šè©³ç´°ãªãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°</li>
<li><a href="../DebugLogger/README.html">DebugLogger</a> - ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›</li>
<li><a href="../DebugUtil/README.html">DebugUtil</a> - ãƒ‡ãƒãƒƒã‚°è¡¨ç¤º</li>
</ul>
<h2 id="ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰">ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰</h2>
<h3 id="ã‚·ãƒ³ãƒ—ãƒ«ãªfpsè¡¨ç¤º">ã‚·ãƒ³ãƒ—ãƒ«ãªFPSè¡¨ç¤º</h3>
<pre><code class="lang-csharp">public class SimpleFpsDisplay : Object
{
    public override void Execute()
    {
        // FPSã‚’ç”»é¢å·¦ä¸Šã«è¡¨ç¤º
        Renderer.Utils.DrawString(
            $&quot;FPS: {FpsCalculator.GetFps():F1}&quot;,
            new Point2(10, 10),
            FontResourceType.Debug,
            Color.White
        );
    }
}
</code></pre>
<h3 id="ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è­¦å‘Šã‚·ã‚¹ãƒ†ãƒ ">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è­¦å‘Šã‚·ã‚¹ãƒ†ãƒ </h3>
<pre><code class="lang-csharp">public class PerformanceMonitor : Object
{
    private const float WARNING_FPS = 50.0f;
    private const float CRITICAL_FPS = 30.0f;
    
    public override void Execute()
    {
        float fps = FpsCalculator.GetFps();
        
        if (fps &lt; CRITICAL_FPS)
        {
            // é‡å¤§ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ
            Debug.Logger.LogError($&quot;Critical performance: {fps} FPS&quot;);
            // å“è³ªè¨­å®šã‚’ä¸‹ã’ã‚‹ãªã©ã®å¯¾å‡¦
        }
        else if (fps &lt; WARNING_FPS)
        {
            // è­¦å‘Šãƒ¬ãƒ™ãƒ«
            Debug.Logger.LogWarning($&quot;Low performance: {fps} FPS&quot;);
        }
    }
}
</code></pre>
<h3 id="ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰">ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰</h3>
<pre><code class="lang-csharp">public class BenchmarkRunner : Object
{
    private float benchmarkDuration = 60.0f;  // 60ç§’é–“è¨ˆæ¸¬
    private float startTime;
    
    public override bool SetUp()
    {
        FpsCalculator.StartMeasurement();
        startTime = TimeManager.GetCurrentTime();
        return true;
    }
    
    public override void Execute()
    {
        if (TimeManager.GetCurrentTime() - startTime &gt; benchmarkDuration)
        {
            // ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Œäº†
            string result = FpsCalculator.GetDetailedInfo();
            Debug.Logger.Log($&quot;Benchmark Result:\n{result}&quot;);
            
            // çµæœã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜
            System.IO.File.WriteAllText(&quot;benchmark_result.txt&quot;, result);
            
            FpsCalculator.StopMeasurement();
            Vanish();
        }
    }
}
</code></pre>
<h2 id="ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°">ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>
<h3 id="fpsãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œãªã„">FPSãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œãªã„</h3>
<ul>
<li><code>Update()</code>ãŒæ¯ãƒ•ãƒ¬ãƒ¼ãƒ å‘¼ã°ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª</li>
<li>æ¸¡ã—ã¦ã„ã‚‹æ™‚åˆ»ãŒæ­£ã—ã„ã‹ç¢ºèªï¼ˆç§’å˜ä½ï¼‰</li>
<li>åˆæœŸåŒ–ã‚’å¿˜ã‚Œã¦ã„ãªã„ã‹ç¢ºèª</li>
</ul>
<h3 id="fpsãŒä¸å®‰å®š">FPSãŒä¸å®‰å®š</h3>
<ul>
<li>VSyncãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª</li>
<li>ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ã®é‡ã„å‡¦ç†ãŒãªã„ã‹ç¢ºèª</li>
<li>PerformanceProfilerã§è©³ç´°åˆ†æã‚’å®Ÿæ–½</li>
</ul>
<h3 id="è¨ˆæ¸¬å€¤ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œãªã„">è¨ˆæ¸¬å€¤ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œãªã„</h3>
<ul>
<li><code>ResetMeasurement()</code>ã‚’å‘¼ã³å‡ºã™</li>
<li>ã¾ãŸã¯<code>StopMeasurement()</code>â†’<code>StartMeasurement()</code>ã§å†é–‹</li>
</ul>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/EndlessShirafu/VaNilla/blob/develop/Documents/docfx/modules/FpsCalculator/README.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
